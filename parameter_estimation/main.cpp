#include <rapidcsv.h>

#include "include/param_calc.h"

Eigen::MatrixXd pseudo_inverse(const Eigen::MatrixXd &A)
{
    return A.completeOrthogonalDecomposition().pseudoInverse();
}

int main()
{
    std::vector<std::vector<float>> g{{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81},{0,0,-9.81}};
    std::vector<std::vector<float>> f{{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9}};
    std::vector<std::vector<float>> t{{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9},{1,2,3},{4,5,6},{7,8,9}};
    std::vector<std::vector<std::vector<float>>> r{{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}},{{1,2,3},{4,5,6},{7,8,9}}};

    parameter_calculation calc;
    calc.update_Matrix(f,g,t);
    Eigen::MatrixXd x = calc.define_A(g);
    std::cout << x << std::endl;


    return 0;
}
